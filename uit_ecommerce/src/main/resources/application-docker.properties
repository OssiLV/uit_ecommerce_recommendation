# Docker Profile Configuration
# Activate with: SPRING_PROFILES_ACTIVE=docker

spring.application.name=ecommerce

# Database - use container name as host
spring.datasource.url=jdbc:postgresql://postgres:5432/ecommerce
spring.datasource.username=postgres
spring.datasource.password=123456
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.open-in-view=false

# Redis - use container name as host
spring.data.redis.host=redis
spring.data.redis.port=6379
spring.cache.type=redis
spring.cache.redis.time-to-live=600000

# Elasticsearch - use container name as host
spring.elasticsearch.uris=http://elasticsearch:9200
spring.data.elasticsearch.repositories.enabled=true

# File Upload
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=20MB

# Security
application.security.jwt.secret-key=404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970
application.security.jwt.expiration=6000000
application.file.upload-dir=uploads

# TensorFlow Serving endpoints (use container name)
application.ai.service.url=http://tf-serving:8501/v1/models/recommender:predict
application.ai.service.base-url=http://tf-serving:8501
application.ai.training.cron=0 0 2 * * ?
application.ai.training.enabled=true

# Logging
logging.level.org.springframework.cache=INFO
logging.level.com.ecommerce=INFO

# Actuator for health checks
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always
management.endpoints.web.base-path=/actuator
# Disable security for actuator endpoints
management.server.port=8080

# Debug Elasticsearch Client
logging.level.org.springframework.data.elasticsearch.client.WIRE=TRACE
logging.level.org.apache.http.wire=TRACE
